# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ auth-service

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:

### 1. –°–æ–∑–¥–∞–Ω –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä @Public()
**–§–∞–π–ª:** `src/auth/public.decorator.ts`
```typescript
import { SetMetadata } from '@nestjs/common';

export const IS_PUBLIC_KEY = 'isPublic';
export const Public = () => SetMetadata(IS_PUBLIC_KEY, true);
```

### 2. –û–±–Ω–æ–≤–ª–µ–Ω JwtAuthGuard
**–§–∞–π–ª:** `src/auth/jwt.guard.ts`
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ `@Public()` –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–∞
- –ü—É–±–ª–∏—á–Ω—ã–µ endpoints –ø—Ä–æ–ø—É—Å–∫–∞—é—Ç—Å—è –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ JWT
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `Reflector` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö

### 3. –î–æ–±–∞–≤–ª–µ–Ω–∞ –≥–ª–æ–±–∞–ª—å–Ω–∞—è –∑–∞—â–∏—Ç–∞ JWT
**–§–∞–π–ª:** `src/app.module.ts`
```typescript
providers: [
  {
    provide: APP_GUARD,
    useClass: JwtAuthGuard,
  },
],
```

### 4. –ü–æ–º–µ—á–µ–Ω—ã –ø—É–±–ª–∏—á–Ω—ã–µ endpoints

#### **auth.controller.ts:**
- ‚úÖ `POST /auth/register` - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
- ‚úÖ `POST /auth/login` - –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- ‚úÖ `POST /auth/refresh-token` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞
- ‚úÖ `POST /auth/confirm-email` - –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ email
- ‚úÖ `POST /auth/resend-confirmation` - –ø–æ–≤—Ç–æ—Ä–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞
- ‚úÖ `GET /auth/check-email` - –ø—Ä–æ–≤–µ—Ä–∫–∞ email
- ‚úÖ `GET /auth/teachers` - —Å–ø–∏—Å–æ–∫ —É—á–∏—Ç–µ–ª–µ–π
- ‚úÖ `GET /auth/users/:id` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
- ‚úÖ `POST /auth/users/by-email` - –ø–æ–∏—Å–∫ –ø–æ email

#### **goals.controller.ts:**
- ‚úÖ `GET /goals/exam-levels` - —É—Ä–æ–≤–Ω–∏ —ç–∫–∑–∞–º–µ–Ω–æ–≤

#### **email.controller.ts:**
- ‚úÖ `GET /email/user/:id` - email –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

#### **profiles.controller.ts:**
- ‚úÖ `POST /profiles` - —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è
- ‚úÖ `GET /profiles/:user_id` - –ø–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è
- ‚úÖ `PUT /profiles/:user_id` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è

#### **teacher-profile.controller.ts:**
- ‚úÖ `POST /teacher-profile/create/:userId` - —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è —É—á–∏—Ç–µ–ª—è
- ‚úÖ `GET /teacher-profile/:userId` - –ø–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è —É—á–∏—Ç–µ–ª—è
- ‚úÖ `GET /teacher-profile/full/:userId` - –ø–æ–ª–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å —É—á–∏—Ç–µ–ª—è
- ‚úÖ `PUT /teacher-profile/update/:userId` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è —É—á–∏—Ç–µ–ª—è
- ‚úÖ `PUT /teacher-profile/photo/:userId` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ–æ—Ç–æ

#### **teacher-review.controller.ts:**
- ‚úÖ `GET /reviews/teacher/:teacherId` - –æ—Ç–∑—ã–≤—ã —É—á–∏—Ç–µ–ª—è
- ‚úÖ `POST /reviews` - —Å–æ–∑–¥–∞–Ω–∏–µ –æ—Ç–∑—ã–≤–∞

## üîí –ó–∞—â–∏—â–µ–Ω–Ω—ã–µ endpoints (—Ç—Ä–µ–±—É—é—Ç JWT):

#### **auth.controller.ts:**
- üîê `GET /auth/users/stats` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (—Ç–æ–ª—å–∫–æ admin)
- üîê `GET /auth/profile` - –ø—Ä–æ—Ñ–∏–ª—å —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç:

### ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:
- **–ì–ª–æ–±–∞–ª—å–Ω–∞—è –∑–∞—â–∏—Ç–∞ JWT** - –≤—Å–µ endpoints –∑–∞—â–∏—â–µ–Ω—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- **–ü—É–±–ª–∏—á–Ω—ã–µ endpoints** - –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–æ–º–µ—á–µ–Ω—ã –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- **–†–æ–ª–∏ –∏ –ø—Ä–∞–≤–∞** - –∑–∞—â–∏—â–µ–Ω–Ω—ã–µ endpoints —Ç—Ä–µ–±—É—é—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ —Ä–æ–ª–∏

### ‚úÖ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:
- **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è/–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è** - —Ä–∞–±–æ—Ç–∞—é—Ç –±–µ–∑ JWT
- **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤** - —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ JWT
- **–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ email** - —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ JWT
- **–ü—É–±–ª–∏—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è** - –¥–æ—Å—Ç—É–ø–Ω–∞ –≤—Å–µ–º (—É—á–∏—Ç–µ–ª—è, –ø—Ä–æ—Ñ–∏–ª–∏, –æ—Ç–∑—ã–≤—ã)

### ‚úÖ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:
- **–ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –∑–∞—â–∏—Ç—ã** - –≥–ª–æ–±–∞–ª—å–Ω—ã–π guard
- **–ì–∏–±–∫–æ—Å—Ç—å** - –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –ø—É–±–ª–∏—á–Ω—ã–µ endpoints
- **–ß–∏—Ç–∞–µ–º–æ—Å—Ç—å** - —á–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –ø—É–±–ª–∏—á–Ω—ã–µ –∏ –∑–∞—â–∏—â–µ–Ω–Ω—ã–µ

## üìã –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø—É–±–ª–∏—á–Ω–æ–≥–æ endpoint:
```typescript
@Public()
@Get('new-endpoint')
async newEndpoint() {
  // –≠—Ç–æ—Ç endpoint –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –±–µ–∑ JWT
}
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞—â–∏—â–µ–Ω–Ω–æ–≥–æ endpoint:
```typescript
@Get('protected-endpoint')
async protectedEndpoint() {
  // –≠—Ç–æ—Ç endpoint —Ç—Ä–µ–±—É–µ—Ç JWT (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
}
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ endpoint —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π —Ä–æ–ª–µ–π:
```typescript
@Roles('admin', 'teacher')
@Get('admin-endpoint')
async adminEndpoint() {
  // –≠—Ç–æ—Ç endpoint —Ç—Ä–µ–±—É–µ—Ç JWT + —Ä–æ–ª–∏ admin –∏–ª–∏ teacher
}
```

## üö® –í–∞–∂–Ω–æ:

1. **–í—Å–µ endpoints —Ç–µ–ø–µ—Ä—å –∑–∞—â–∏—â–µ–Ω—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é**
2. **–¢–æ–ª—å–∫–æ —è–≤–Ω–æ –ø–æ–º–µ—á–µ–Ω–Ω—ã–µ @Public() endpoints –¥–æ—Å—Ç—É–ø–Ω—ã –±–µ–∑ JWT**
3. **–†–æ–ª–∏ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è —á–µ—Ä–µ–∑ RolesGuard –¥–ª—è –∑–∞—â–∏—â–µ–Ω–Ω—ã—Ö endpoints**
4. **–ü—É–±–ª–∏—á–Ω—ã–µ endpoints –Ω–µ –ø—Ä–æ–≤–µ—Ä—è—é—Ç —Ä–æ–ª–∏**

## ‚úÖ –°—Ç–∞—Ç—É—Å:
- ‚úÖ –ì–ª–æ–±–∞–ª—å–Ω–∞—è –∑–∞—â–∏—Ç–∞ JWT –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞
- ‚úÖ –ü—É–±–ª–∏—á–Ω—ã–µ endpoints –ø–æ–º–µ—á–µ–Ω—ã
- ‚úÖ –ó–∞—â–∏—â–µ–Ω–Ω—ã–µ endpoints —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ –†–æ–ª–∏ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞












